<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

<link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}">

<script th:src="@{/webjars/jquery/jquery.min.js}" defer></script>
<script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}" defer></script>

<link href="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.8/datatables.min.css" rel="stylesheet">
<script src="https://cdn.datatables.net/v/dt/jq-3.7.0/dt-2.1.8/datatables.min.js"></script>

<!--
<link href="https://cdn.datatables.net/v/dt/dt-2.1.8/datatables.min.css" rel="stylesheet">
 
<script src="https://cdn.datatables.net/v/dt/dt-2.1.8/datatables.min.js"></script>
  -->


    <script>
        jQuery(function($){
		//$(document).ready( function () {
		 $.extend( $.fn.dataTable.defaults, { 
			language: {
        url: '//cdn.datatables.net/plug-ins/2.1.8/i18n/ja.json',
     } 
    }); 
			
            $("#bookList").DataTable();
        });
    </script>
<title>table data test</title>
</head>
<body>
	
    <table id="bookList" class="table table-bordered table-striped table-hover">
			<thead class="table-light">
				<tr>
					<th scope="col">タイトル</th>
					<th scope="col">著者</th>
					<th scope="col">シリーズ</th>
					<th scope="col">出版社</th>
					<th scope="col">購入日</th>
					<th scope="col">読了日</th>
					<th scope="col">操作</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="item: ${bookList}" th:classappend="${item.isDisposed == 1}? 'collapse disposed'"
					th:id="${item.isDisposed == 1}? 'disposedBook'">
					<td class="data" scope="row" th:text="${item.bookTitle}"></td>
					<td class="data" th:text="${item.author}"></td>
					<td class="data">
						<span th:if="${item.seriesId != null}"
						 th:text="${item.series.seriesName}">
						</span>
					</td>
					<td class="data" th:text="${item.publisher.publisherName}"></td>
					<td class="data" th:text="${#dates.format(item.purchasedDate,'YYYY/MM/dd')}"></td>
					<td class="data" th:text="${item.finishedDate == null}? '未' : ${#dates.format(item.finishedDate,'YYYY/MM/dd')}"></td>
					<td class="text-center">
						<th:block th:if="${item.finishedDate == null}">
							<a class="btn btn-sm btn-primary" th:href="@{'/book/finish/' + ${item.id}}">読了</a>
						</th:block>
						<th:block th:if="${item.finishedDate != null}">
							<a class="btn btn-sm btn-secondary" th:href="@{'/book/finish/' + ${item.id}}">未読</a>
						</th:block>
						<a class="btn btn-sm btn-info" th:href="@{'/book/detail/' + ${item.id}}">詳細</a>
					</td>
				</tr>
			</tbody>
		</table>

</body>
</html>